<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Developer By Ng Quoc Khang</title>
    <style>
        /* CSS CHUNG */
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            text-align: center;
            height: 100vh;
            position: relative;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            /* TƒÉng c∆∞·ªùng ch·ªëng b√¥i ƒëen cho to√†n b·ªô body, quan tr·ªçng cho di ƒë·ªông */
            -webkit-user-select: none; 
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        /* CSS CHO CH·ªêNG GIAN L·∫¨N */
        .exam-content {
            overflow: auto;
            max-height: 100%;
            width: 100%;
        }

        /* ·∫®n Form khi v√†o thi, ·∫®n N·ªôi dung thi khi ch∆∞a nh·∫≠p Form */
        #input-form { display: block; }
        #exam-container { display: none; } 
        
        /* CSS NgƒÉn in ·∫•n */
        @media print {
            body * { display: none !important; }
        }

        /* CSS WATERMARK */
        .watermark {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
            opacity: 0.15;
            color: #888;
            overflow: hidden;
        }
        .watermark-text {
            position: absolute;
            font-size: 16px; 
            transform: rotate(-30deg);
            white-space: nowrap;
        }

        /* CSS cho Form */
        .input-group {
            margin-bottom: 15px;
            text-align: left;
        }
        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        .input-group input {
            width: 100%;
            padding: 10px;
            box-sizing: border-box;
            border: 1px solid #ccc;
            border-radius: 4px;
            /* Cho ph√©p nh·∫≠p li·ªáu nh∆∞ng kh√¥ng cho b√¥i ƒëen */
            -webkit-user-select: text; 
            user-select: text; 
        }
        .start-button {
            padding: 10px 20px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }
    </style>
</head>
<body>

    <div id="input-form">
        <h2>Nh·∫≠p Th√¥ng Tin Th√≠ Sinh</h2>
        <div class="input-group">
            <label for="studentName">H·ªç v√† T√™n:</label>
            <input type="text" id="studentName" placeholder="V√≠ d·ª•: Nguy·ªÖn VƒÉn A" required>
        </div>
        <div class="input-group">
            <label for="studentClass">L·ªõp/M√£ s·ªë:</label>
            <input type="text" id="studentClass" placeholder="V√≠ d·ª•: K12A5" required>
        </div>
        <button class="start-button" onclick="startExam()">B·∫Øt ƒê·∫ßu B√†i Thi</button>
    </div>

    <div id="exam-container">
        <div class="exam-content">
            <h1>Web Th·ª≠ Nghi·ªám ch·ª©c nƒÉng ch·ªëng gian l·∫≠n khi gian</h1>
            <p>ƒê∆∞·ª£c ph√°t tri·ªÉn b·ªüi Ng Quoc Khang V√† ƒê·ªôi Ng≈© Wus-Group.</p>
            <p>Li√™n h·ªá ƒë·ªÉ ƒë∆∞·ª£c h·ªó tr·ª£.</p>
            <p>Telegram : t.me/nezpoder</p>
            <p>Xin ch√†o <span id="display-info" style="font-weight: bold; color: red;"></span>. B·∫°n ƒë√£ s·∫µn s√†ng l√†m b√†i.</p>
            
            <div style="height: 500px; border: 1px solid #eee; margin-top: 20px; padding: 15px; background: #f9f9f9; text-align: left;">
                <br><br><br>
                1. H√£y gi·∫£i th√≠ch ƒë·ªãnh lu·∫≠t Ohm b·∫±ng c√¥ng th·ª©c to√°n h·ªçc v√† c√°c ƒë∆°n v·ªã t∆∞∆°ng ·ª©ng.
                <br><br>
                **ƒê√°p √°n:** ƒê·ªãnh lu·∫≠t Ohm ph√°t bi·ªÉu r·∫±ng hi·ªáu ƒëi·ªán th·∫ø ($V$) tr√™n m·ªôt v·∫≠t d·∫´n t·ª∑ l·ªá thu·∫≠n v·ªõi c∆∞·ªùng ƒë·ªô d√≤ng ƒëi·ªán ($I$) ch·∫°y qua n√≥, v·ªõi h·ªá s·ªë t·ª∑ l·ªá l√† ƒëi·ªán tr·ªü ($R$). C√¥ng th·ª©c l√†: $V = I \cdot R$ (Volt = Ampere $\cdot$ Ohm).
            </div>
        </div>
        <div id="dynamic-watermark" class="watermark"></div>
    </div>

    <script>
        // ====================================================
        // KHU V·ª∞C TH√îNG TIN V√Ä H√ÄM C·∫¢NH B√ÅO
        // ====================================================
        
        // üö® C·∫¢NH B√ÅO: KH√îNG AN TO√ÄN KHI D√ôNG TRONG M√îI TR∆Ø·ªúNG CH√çNH TH·ª®C!
        const BOT_TOKEN = '8581820656:AAF6FWlLPnsyMlAefGSn-CTECAs_OFf5RHs'; 
        const CHAT_ID = '-4845880152'; 
        
        let studentInfo = {
            name: 'Ch∆∞a X√°c ƒê·ªãnh',
            class: 'N/A'
        };

        let isDebugging = false; // Bi·∫øn theo d√µi tr·∫°ng th√°i DevTools/Chuy·ªÉn tab

        // H√†m m·ªõi: G·ª≠i tin nh·∫Øn tr·ª±c ti·∫øp ƒë·∫øn Telegram (KH√îNG AN TO√ÄN)
        function sendViolationLog_Direct(type, details) {
            if (!CHAT_ID || CHAT_ID === 'YOUR_CHAT_ID') { 
                console.error("L·ªói: Chat ID ch∆∞a ƒë∆∞·ª£c c·∫•u h√¨nh ch√≠nh x√°c ho·∫∑c b·ªã thi·∫øu.");
                return;
            }
            
            const userId = studentInfo.name + ' (' + studentInfo.class + ')';
            const message = ` *C·∫¢NH B√ÅO GIAN L·∫¨N* \n\n` +
                            ` *Th√≠ sinh:* ${userId}\n` +
                            ` *Vi ph·∫°m:* ${type}\n` +
                            ` *Chi ti·∫øt:* ${details}`;
                            
            const encodedMessage = encodeURIComponent(message);
            const telegramApiUrl = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage?chat_id=${CHAT_ID}&text=${encodedMessage}&parse_mode=Markdown`;

            fetch(telegramApiUrl)
                .then(response => {
                    if (!response.ok) {
                        console.error(`L·ªói HTTP ${response.status} khi g·ª≠i Telegram:`, response.statusText);
                    } else {
                        console.log(`ƒê√£ g·ª≠i c·∫£nh b√°o ${type} th√†nh c√¥ng.`);
                    }
                })
                .catch(error => {
                    console.error('L·ªói k·∫øt n·ªëi (Network Error) khi g·ª≠i log:', error);
                });
        }

        // H√†m x·ª≠ l√Ω khi nh·∫•n n√∫t B·∫Øt ƒê·∫ßu
        function startExam() {
            const name = document.getElementById('studentName').value.trim();
            const classVal = document.getElementById('studentClass').value.trim();

            if (!name || !classVal) {
                alert('Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß T√™n v√† L·ªõp tr∆∞·ªõc khi b·∫Øt ƒë·∫ßu.');
                return;
            }

            // L∆∞u th√¥ng tin ng∆∞·ªùi d√πng
            studentInfo.name = name;
            studentInfo.class = classVal;

            // ·∫®n form, hi·ªán n·ªôi dung thi
            document.getElementById('input-form').style.display = 'none';
            document.getElementById('exam-container').style.display = 'block';
            document.getElementById('display-info').textContent = `${name} - ${classVal}`;

            // K√≠ch ho·∫°t l·∫°i c√°c h√†m ch·ªëng gian l·∫≠n v√† watermark ƒë·ªông
            setupAntiCheatingEvents();
            createWatermarks(); 
        }

        // H√†m thi·∫øt l·∫≠p c√°c s·ª± ki·ªán ch·ªëng gian l·∫≠n
        function setupAntiCheatingEvents() {
            // Ch·ªëng Chu·ªôt ph·∫£i (PC) v√† Nh·∫•n gi·ªØ (Long press) tr√™n Mobile
            document.addEventListener('contextmenu', e => {
                e.preventDefault();
                sendViolationLog_Direct('RIGHT_CLICK', 'C·ªë g·∫Øng m·ªü menu chu·ªôt ph·∫£i.');
            });
            
            // Ch·ªëng Sao ch√©p v√† D√°n
            document.addEventListener('copy', e => {
                e.preventDefault();
                console.warn('Sao ch√©p b·ªã ch·∫∑n.');
                sendViolationLog_Direct('COPY_ATTEMPT', 'C·ªë g·∫Øng sao ch√©p n·ªôi dung.');
            });
            document.addEventListener('paste', e => {
                e.preventDefault();
                console.warn('D√°n b·ªã ch·∫∑n.');
                sendViolationLog_Direct('PASTE_ATTEMPT', 'C·ªë g·∫Øng d√°n n·ªôi dung.');
            });

            // Ch·ªëng In ·∫•n (Ctrl+P) & Ph√≠m t·∫Øt DevTools
            document.addEventListener('keydown', function(e) {
                if ((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === 'p') {
                    e.preventDefault();
                    alert('In ·∫•n ƒë√£ b·ªã v√¥ hi·ªáu h√≥a.');
                    sendViolationLog_Direct('PRINT_ATTEMPT', 'C·ªë g·∫Øng in b√†i thi.');
                }
                
                const forbiddenKeys = ['F12', 'I', 'J', 'C', 'U']; 
                const isDevtoolsShortcut = e.key === 'F12' || 
                                           ((e.ctrlKey || e.metaKey) && e.shiftKey && forbiddenKeys.includes(e.key.toUpperCase())) || 
                                           ((e.ctrlKey || e.metaKey) && e.key.toUpperCase() === 'U');
                
                if (isDevtoolsShortcut) {
                    e.preventDefault();
                    alert('M·ªü DevTools b·ªã ch·∫∑n!');
                    sendViolationLog_Direct('DEVTOOLS_SHORTCUT', 'C·ªë g·∫Øng m·ªü DevTools b·∫±ng ph√≠m t·∫Øt.');
                }
            });

            // C·∫£nh b√°o Tho√°t ho·∫∑c Chuy·ªÉn trang
            window.addEventListener('beforeunload', function (e) {
                e.preventDefault();
                e.returnValue = 'B√†i thi ƒëang ƒë∆∞·ª£c gi√°m s√°t.';
            });

            // Thay ƒë·ªïi trong h√†m setupAntiCheatingEvents
// C·∫¢NH B√ÅO CHUY·ªÇN TAB/·ª®NG D·ª§NG (PC/ANDROID/IOS) - ƒê√É T·ªêI ∆ØU
document.addEventListener('visibilitychange', function() {
    if (document.hidden) {
        // <<<<< TH√äM D√íNG LOG N√ÄY ƒê·ªÇ KI·ªÇM TRA >>>>>
        console.log("!!! ƒê√É PH√ÅT HI·ªÜN TRANG B·ªä ·∫®N. G·ª¨I C·∫¢NH B√ÅO !!!");
        
        isDebugging = false; // Ng·ª´ng v√≤ng l·∫∑p debugger khi b·ªã ·∫©n
        
        // G·ª≠i c·∫£nh b√°o ngay l·∫≠p t·ª©c
        sendViolationLog_Direct('TAB_SWITCHED', 'Ng∆∞·ªùi d√πng ƒë√£ chuy·ªÉn sang tab ho·∫∑c ·ª©ng d·ª•ng kh√°c (trang b·ªã ·∫©n).');
        
        // Alert ch·∫°y sau khi g·ªçi API (ƒë·ªÉ kh√¥ng ch·∫∑n API)
        setTimeout(() => {
            alert('Vui l√≤ng gi·ªØ trang n√†y hi·ªÉn th·ªã. H√†nh ƒë·ªông tho√°t s·∫Ω ƒë∆∞·ª£c ghi nh·∫≠n v√† g·ª≠i th√¥ng b√°o v·ªÅ gvgv.');
        }, 100); 

    } else {
        isDebugging = true; 
        console.log("Tr·ªü l·∫°i b√†i thi. Gi√°m s√°t ƒëang ti·∫øp t·ª•c.");
    }
});

            // Li√™n t·ª•c g·ªçi debugger (K·ªπ thu·∫≠t ch·ªëng DevTools)
            (function continuousDebugger() {
                // Ki·ªÉm tra n·∫øu trang b·ªã ·∫©n, d·ª´ng v√≤ng l·∫∑p (isDebugging = false)
                if (!isDebugging && document.hidden) {
                    setTimeout(continuousDebugger, 1000); 
                    return;
                }
                
                // Ph√°t hi·ªán DevTools b·∫±ng k√≠ch th∆∞·ªõc c·ª≠a s·ªï
                if (window.outerWidth - window.innerWidth > 100 || window.outerHeight - window.innerHeight > 100) {
                     sendViolationLog_Direct('DEVTOOL_SIZE_DETECTED', 'Ph√°t hi·ªán c·ª≠a s·ªï DevTools ƒëang m·ªü.');
                }
                
                // L·ªánh debugger: s·∫Ω t·∫°m d·ª´ng m√£ n·∫øu DevTools m·ªü
                debugger; 
                
                setTimeout(continuousDebugger, 100); 
            })();
            isDebugging = true; // B·∫Øt ƒë·∫ßu v√≤ng l·∫∑p debugger
        }

        // ----------------------------------------------------
        // WATERMARK ƒê·ªòNG
        // ----------------------------------------------------
        
        const watermarkContainer = document.getElementById('dynamic-watermark');
        const numWatermarks = 25; 

        function createWatermarks() {
            watermarkContainer.innerHTML = '';
            const containerWidth = watermarkContainer.offsetWidth;
            const containerHeight = watermarkContainer.offsetHeight;

            // D·ªØ li·ªáu Watermark ƒë√£ ƒë∆∞·ª£c c·∫≠p nh·∫≠t
            const userIdText = `${studentInfo.name} | ${studentInfo.class}`; 
            const timestamp = new Date().toLocaleTimeString();
            const watermarkText = `C·∫§M SAO CH√âP | ${userIdText} | ${timestamp}`;

            for (let i = 0; i < numWatermarks; i++) {
                const mark = document.createElement('span');
                mark.className = 'watermark-text';
                mark.textContent = watermarkText;
                
                mark.style.top = `${Math.random() * containerHeight}px`;
                mark.style.left = `${Math.random() * containerWidth}px`;
                
                watermarkContainer.appendChild(mark);
            }
        }

        window.addEventListener('resize', createWatermarks);
    </script>
</body>
</html>


