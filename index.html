<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Developer By Ng Quoc Khang</title>
    <style>
        /* CSS CHỐNG CHỌN VÀ IN ẤN */
        body {
            /* Ngăn chặn bôi đen văn bản trên mọi thiết bị, RẤT QUAN TRỌNG cho Mobile */
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            font-family: Arial, sans-serif;
            padding: 20px;
            text-align: center;
            height: 100vh;
            overflow: hidden;
            position: relative;
        }

        /* Ngăn chặn in ấn (Print Screen to PDF) */
        @media print {
            body * {
                display: none !important;
            }
        }

        /* CSS WATERMARK */
        .watermark {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none; /* Cho phép tương tác với nội dung bên dưới */
            z-index: 9999;
            opacity: 0.15;
            color: #888;
            overflow: hidden;
        }

        .watermark-text {
            position: absolute;
            font-size: 16px; /* Điều chỉnh nhỏ hơn cho màn hình di động */
            transform: rotate(-30deg);
            white-space: nowrap;
        }
    </style>
</head>
<body>

    <h1>Web Thử Nghiệm  chức năng chống gian lận khi gian</h1>
    <p>Được phát triển bởi Ng Quoc Khang Và Đội Ngũ Wus-Group.</p>
    <p>Liên hệ để được hỗ trợ.</p>
    <p>Telegram : t.me/nezpodernezpoder</p>

    <div id="dynamic-watermark" class="watermark"></div>

    <script>
        // ----------------------------------------------------
        // I. CHỐNG THAO TÁC CƠ BẢN (PC & MOBILE)
        // ----------------------------------------------------

        // Chống Chuột phải (PC) và Nhấn giữ (Long press) trên Mobile
        document.addEventListener('contextmenu', e => e.preventDefault());
        
        // Chống Bôi đen (selectstart) - Tăng cường cho Mobile
        document.addEventListener('selectstart', e => e.preventDefault()); 

        // Chống Sao chép và Dán
        document.addEventListener('copy', e => {
            e.preventDefault();
            console.warn('Sao chép bị chặn.');
        });
        document.addEventListener('paste', e => {
            e.preventDefault();
            console.warn('Dán bị chặn.');
        });

        // Chống In ấn (Ctrl+P)
        document.addEventListener('keydown', function(e) {
            // Kiểm tra Ctrl/Cmd + P
            if ((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === 'p') {
                e.preventDefault();
                alert('In ấn đã bị vô hiệu hóa.');
            }
        });


        // ----------------------------------------------------
        // II. CẢNH BÁO CHUYỂN TAB/ỨNG DỤNG (PC & MOBILE)
        // ----------------------------------------------------

        // Cảnh báo Thoát hoặc Chuyển trang
        window.addEventListener('beforeunload', function (e) {
            e.preventDefault();
            e.returnValue = 'Bài thi đang được giám sát.';
        });

        // Cảnh báo Chuyển Tab/Ứng dụng (Khi trang bị ẩn)
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                // Hành động khi người dùng chuyển sang ứng dụng/tab khác
                alert('Vui lòng giữ trang này hiển thị. Hành động thoát sẽ được ghi nhận và gửi thông báo về gvgv.');
                // Tùy chọn: Gửi request lên server để ghi lại sự kiện này.
            }
        });


        // ----------------------------------------------------
        // III. CHỐNG F12/DEVTOOLS NÂNG CẤP (CHỦ YẾU CHO PC)
        // ----------------------------------------------------

        // Vô hiệu hóa phím tắt DevTools (F12, Ctrl+Shift+I, etc.)
        document.addEventListener('keydown', function (e) {
            const forbiddenKeys = ['F12', 'I', 'J', 'C', 'U']; // I, J, C (Ctrl+Shift+C/I/J) và U (Ctrl+U)
            if (e.key === 'F12' || ((e.ctrlKey || e.metaKey) && e.shiftKey && forbiddenKeys.includes(e.key.toUpperCase())) || ((e.ctrlKey || e.metaKey) && e.key.toUpperCase() === 'U')) {
                e.preventDefault();
                alert('Mở DevTools bị chặn!');
            }
        });

        // Liên tục gọi debugger
        (function continuousDebugger() {
            // Nếu phát hiện kích thước cửa sổ bất thường (PC)
            if (window.outerWidth - window.innerWidth > 100 || window.outerHeight - window.innerHeight > 100) {
                 // Cảnh báo (tùy chọn)
            }
            // Lệnh debugger: làm tạm dừng mã nguồn nếu DevTools mở
            debugger; 
            setTimeout(continuousDebugger, 100); 
        })();


        // ----------------------------------------------------
        // IV. WATERMARK ĐỘNG (CHỐNG CHỤP MÀN HÌNH GIÁN TIẾP)
        // ----------------------------------------------------
        
        // Dữ liệu Watermark nên là duy nhất cho mỗi người dùng
        const userId = 'MOBILE_USER_A001'; 
        const timestamp = new Date().toLocaleString();
        const watermarkText = `CẤM SAO CHÉP | ${userId} | ${timestamp}`;

        const watermarkContainer = document.getElementById('dynamic-watermark');
        const numWatermarks = 25; // Tăng số lượng watermark

        function createWatermarks() {
            watermarkContainer.innerHTML = '';
            const containerWidth = watermarkContainer.offsetWidth;
            const containerHeight = watermarkContainer.offsetHeight;

            for (let i = 0; i < numWatermarks; i++) {
                const mark = document.createElement('span');
                mark.className = 'watermark-text';
                mark.textContent = watermarkText;
                
                // Vị trí ngẫu nhiên
                mark.style.top = `${Math.random() * containerHeight}px`;
                mark.style.left = `${Math.random() * containerWidth}px`;
                
                watermarkContainer.appendChild(mark);
            }
        }

        window.addEventListener('resize', createWatermarks);
        createWatermarks(); 

        // Ghi chú: Chống chụp màn hình trên mobile (iOS/Android) chỉ thực sự hiệu quả trong ứng dụng Native.
    </script>
</body>
</html>
