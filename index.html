<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Trang Bảo Vệ Nâng Cao</title>
    <style>
        /* Chống chọn văn bản (Giữ nguyên) */
        body {
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            font-family: Arial, sans-serif;
            padding: 20px;
            text-align: center;
        }
    </style>
</head>
<body>

    <h1>Nội dung được bảo vệ tối đa (về mặt JS)</h1>
    <p>Thử mở DevTools (F12) để xem phản ứng.</p>

    <script>
        // --- 1. CÁC BIỆN PHÁP CHỐNG THAO TÁC CƠ BẢN (Giữ nguyên) ---
        document.addEventListener('contextmenu', function (e) {
            e.preventDefault();
        });

        document.addEventListener('copy', function (e) {
            e.preventDefault();
            console.log('Sao chép bị chặn.');
        });
        
        // --- 2. CẢNH BÁO KHI CHUYỂN TAB/THOÁT (Giữ nguyên) ---
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                alert('Vui lòng giữ tab này hoạt động!');
            }
        });
        
        window.addEventListener('beforeunload', function (e) {
            e.preventDefault();
            e.returnValue = '';
        });

        // --- 3. CHỐNG F12/DEVTOOLS NÂNG CẤP (Gây khó chịu tối đa) ---

        // Hàm kiểm tra chính
        function checkDevTools() {
            // Kiểm tra kích thước cửa sổ/console
            const threshold = 160;
            const widthCheck = window.outerWidth - window.innerWidth > threshold;
            const heightCheck = window.outerHeight - window.innerHeight > threshold;
            
            // Một số trình duyệt tự động gọi debugger khi DevTools mở
            if (widthCheck || heightCheck || (window.devtools && window.devtools.isOpen)) {
                // ĐẦU RA MỚI: Liên tục gọi debugger
                // Lệnh này khiến DevTools tự động tạm dừng mã nguồn ngay lập tức (nếu nó mở)
                debugger; 
            }
        }

        // Tối ưu hóa việc kiểm tra: chạy kiểm tra liên tục
        // Sử dụng cả setInterval và requestAnimationFrame (RAK) để tăng tốc độ phát hiện
        setInterval(checkDevTools, 500); // Kiểm tra mỗi 0.5 giây

        // Dùng RAK để kiểm tra thêm trong chu kỳ render của trình duyệt
        (function loop() {
            checkDevTools();
            window.requestAnimationFrame(loop);
        })();


        // Phương pháp Cứng rắn hơn: Vô hiệu hóa DOM khi DevTools mở
        // Kỹ thuật này phát hiện sự hiện diện của DevTools qua hàm debugger.
        function DevToolsProtector() {
            if(window.outerWidth - window.innerWidth > 100 || window.outerHeight - window.innerHeight > 100) {
                 // Nếu phát hiện DevTools, thay đổi nội dung trang
                 document.body.innerHTML = '<h1>❌ TRUY CẬP TRÁI PHÉP ĐÃ BỊ PHÁT HIỆN ❌</h1>';
            }
            // Lặp lại việc gọi debugger để tiếp tục làm phiền người dùng
            debugger; 
            setTimeout(DevToolsProtector, 50); // Kiểm tra cực nhanh
        }
        
        // Bật hàm bảo vệ cứng rắn (tùy chọn)
        // DevToolsProtector();

    </script>
</body>
</html>
